package xyz.vsngamer.elevator.init;

import net.minecraft.entity.Entity;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.Vec3i;
import net.minecraft.util.text.TextComponentString;
import net.minecraftforge.event.entity.living.LivingEvent.LivingJumpEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class ModEvents {

	@SubscribeEvent
	public void onJump(LivingJumpEvent event) {
		Entity etype = event.getEntity();
		BlockPos pos1 = new BlockPos(etype.posX, etype.posY, etype.posZ);

		if (etype instanceof EntityPlayer
				&& etype.getEntityWorld().getBlockState(pos1.down()).getBlock().equals(ModBlocks.elevator) && etype.onGround) {

			etype.addChatMessage(new TextComponentString("elevator"));
			BlockPos pos2 = pos1.up();
			while (pos2.getY() < 255F) {
				if(etype.getEntityWorld().getBlockState(pos2).getBlock().equals(ModBlocks.elevator)){
					etype.setPosition(pos2.getX(), pos2.getY()+1, pos2.getZ());
					etype.setPosition(pos2.getX(), pos2.getY()+1, pos2.getZ());
				}
				pos2 = pos2.add(0, 1, 0);
			}
		}
	}
}
