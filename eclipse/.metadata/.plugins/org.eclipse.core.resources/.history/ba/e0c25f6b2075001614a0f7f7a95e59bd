package xyz.vsngamer.elevator.init;

import net.minecraft.entity.Entity;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.Vec3i;
import net.minecraft.util.text.TextComponentString;
import net.minecraftforge.event.entity.living.LivingEvent.LivingJumpEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class ModEvents {

	@SubscribeEvent
	public void onJump(LivingJumpEvent event) {
		Entity etype = event.getEntity();
		int x = (int) Math.floor(etype.posX);
		int y = (int) Math.floor(etype.posY);
		int z = (int) Math.floor(etype.posZ);
		BlockPos pos1 = new BlockPos(x, y - 1, z);

		if (etype instanceof EntityPlayer && etype.worldObj.getBlockState(pos1).getBlock().equals(ModBlocks.elevator)) {

			etype.addChatMessage(new TextComponentString("elevator"));
			BlockPos pos2 = pos1;
			while (pos2.getY() < 255) {
				if (etype.worldObj.getBlockState(pos2).getBlock().equals(ModBlocks.elevator)) {
					etype.setPositionAndUpdate(pos2.getX(),pos2.getY()+1, pos2.getZ());
					break;
				}
				pos2.add(0, 1, 0);
			}
		}

	}
}
