package xyz.vsngamer.elevator.init;

import net.minecraft.entity.Entity;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.Vec3i;
import net.minecraft.util.text.TextComponentString;
import net.minecraft.world.World;
import net.minecraftforge.event.entity.living.LivingEvent.LivingJumpEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class ModEvents {

	@SubscribeEvent
	public void onJump(LivingJumpEvent event) {
		Entity entity = event.getEntity();
		BlockPos pos1 = new BlockPos(entity.posX, entity.posY, entity.posZ);

		if (entity instanceof EntityPlayer
				&& entity.getEntityWorld().getBlockState(pos1.down()).getBlock().equals(ModBlocks.elevator) && entity.getEntityWorld().isRemote) {
			entity.addChatMessage(new TextComponentString("elevator"));
			BlockPos pos2 = pos1;
			while (pos2.getY() < 255) {
				if (entity.getEntityWorld().getBlockState(pos2).getBlock().equals(ModBlocks.elevator)) {
					try{
						
					}catch(Exception e){
						entity.addChatMessage(new TextComponentString("There is blocks covering the elevator !"));
					}
					entity.setPositionAndUpdate(pos2.getX()+0.5, pos2.getY() + 1, pos2.getZ()+0.5);
					entity.motionY = 0;
					entity.addChatMessage(new TextComponentString("elevator up"));
					break;
				}
				pos2 = pos2.add(0, 1, 0);
			}
		}
	}
}
